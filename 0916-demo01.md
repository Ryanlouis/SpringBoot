# 0916 Practice - Demo01

### 開啟Spring Initializr 建立專案  

* 填寫專案相關資訊：Group、Artifact、Name、Package name  
* 引入相關的Dependencies  
* 下方Generate下載專案  

<img width="1112" height="908" alt="{30415199-3063-416E-8AC5-11B86F102E32}" src="https://github.com/user-attachments/assets/3fd3f711-b57b-4bbe-a084-edd2f9883f35" />

### 調整 Project Setting

* 打開 IntelliJ 按 F4 開啟 Project Setting  
<img width="1016" height="405" alt="{2EE4DE28-8EFB-4E8E-BFA5-FC41DA8027D8}" src="https://github.com/user-attachments/assets/97e52aef-b6c1-4199-99dc-98840e6e1f40" />  

* 打開 Setting  
<img width="337" height="263" alt="{2C743E9E-AD5D-49D6-B8CC-994A9D0B07DF}" src="https://github.com/user-attachments/assets/e87276e4-df3c-4438-a4a0-ad6db350a97d" />

* 安裝 兩個Plugin  
<img width="855" height="489" alt="{AAFD0898-53DF-4CA8-97CF-31F7E43D03BF}" src="https://github.com/user-attachments/assets/ac452ac3-ed3b-4691-8209-d0225091ec71" />

* Enable Annotation  
<img width="984" height="735" alt="2025-09-16 10_47_07-Settings" src="https://github.com/user-attachments/assets/3e7398c7-633b-4469-baa4-f82f5ffce342" />

* 重啟 IntelliJ後 ，起Springboot服務
<img width="1185" height="528" alt="2025-09-16 10_48_54-demo1 – Demo1Application java" src="https://github.com/user-attachments/assets/e959eb8e-227a-4685-918b-0ebee4aa1aad" />

* 看到json出現就是有起成功了

http://localhost:8080/actuator  
<img width="651" height="161" alt="{6E84D7E6-D54B-433B-B951-9C7E193D5CB2}" src="https://github.com/user-attachments/assets/f1e53d8d-c234-4ff1-83a2-ac65a86a2a15" />

### 包成docker-image

open terminal inside intelliJ  
* .\mvnw --version  
* .\mvnw dependency:tree  

close intelliJ run process  
* .\mvnw spring-boot:run
* ctrl + C  

包 jar 
* .\mvnw package
*  java -jar .\target\demo1-0.0.1-SNAPSHOT.jar  

check docker desktop is running  
* docker ps  

包 Docker-images   
* .\mvnw spring-boot:build-image  
<img width="646" height="150" alt="{CB13365F-D703-43BC-B1C4-B1DF111271E7}" src="https://github.com/user-attachments/assets/f83f417b-1638-456c-a2f4-08f10f09c575" />  

RUN Docker  
* docker run demo1:0.0.1-SNAPSHOT  
* docker run demo1:0.0.1-SNAPSHOT -d (detach背景run)  
* docker run -d -p 8080:8080 demo1:0.0.1-SNAPSHOT
* docker run -d -p 8888:8080 demo1:0.0.1-SNAPSHOT (前面8888是container的port)  

清除項目在Build過程中產生的東西(通常位於target目錄下)rget 目录下）
* .\mvnw clean

### DemoController

```java
DemoController.java

package com.uuu.demo1;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class DemoController {
    @GetMapping("/")
    public String index() {
        return "it works";
    }
}
```

java自動import(建議非強制)  



### 改使用 @Controller
<img width="984" height="735" alt="2025-09-16 11_55_31-Settings" src="https://github.com/user-attachments/assets/6473806b-aeb0-484d-a6d6-9f8efb30bf29" />

```java
DemoController.java

package com.uuu.demo1.controllers;


import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@Controller
public class DemoController {
    @GetMapping("/")
    public String index() {
        return "home";
    }
}
```

templates資料夾下建立一個 home.html
<img width="1075" height="515" alt="2025-09-16 13_14_12-demo1 – DemoController java" src="https://github.com/user-attachments/assets/975d16ff-5c1b-4211-91cb-819fa8258ca0" />

```html
home.html

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>hello thymeleaf</h1>
</body>
</html>
```

### 放圖檔

圖檔放到images資料夾內 https://www.thymeleaf.org/   
<img width="469" height="527" alt="2025-09-16 13_25_26-demo1 – DemoController java" src="https://github.com/user-attachments/assets/22358dc9-614f-41d0-949a-acf4e35f04dd" />

```html
home.html

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>hello thymeleaf</h1>
<p>origin</p>
<img src="/images/thymeleaf.png"/>
<p>server side rendering</p>
<img src="/images/thymeleaf.png"/>
</body>
</html>
```
<img width="694" height="932" alt="{A975A801-E0E8-486E-A918-5EA546D7E57E}" src="https://github.com/user-attachments/assets/5b0132eb-69c8-456b-92f2-d7d2ca43dc10" />

### Server side rendering (顯示同前)

```html
home.html

<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>hello thymeleaf</h1>
<p>origin</p>
<img src="/images/thymeleaf.png"/>
<p>server side rendering</p>
<img th:src="@{/images/thymeleaf.png}"/>
</body>
</html>
```

### 增加Context Path

```properties
application.properties

spring.application.name=demo1
server.servlet.context-path=/ucom
```

要記得加context-path後面那段，才會找到服務  
<img width="855" height="227" alt="{DAC31517-D5E6-4E1F-9B23-0BF5ABD8BD6A}" src="https://github.com/user-attachments/assets/2df53ba3-f867-4639-a324-deb06ae67bee" />

上面的圖片便找不到了  
<img width="838" height="842" alt="{1F6CE399-8E1F-4739-9481-69D85C3CDC01}" src="https://github.com/user-attachments/assets/951f4177-6e7c-49fa-9694-1a415d8228c6" />

server side rendering的會被修正前面路徑  
<img width="548" height="292" alt="{D0F09E0F-93DE-4D78-A976-BF2144BAADCB}" src="https://github.com/user-attachments/assets/8f65dc99-26d3-4bbd-8ab2-e48c735c7d73" />  

### Controller指向有子目錄結構的view

```html
info/contact.html

<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>如果有問題請聯絡...人</h1>
</body>
</html>
```

<img width="1138" height="625" alt="2025-09-16 13_58_56-demo1 – DemoController java" src="https://github.com/user-attachments/assets/9518785f-013a-4f30-87a6-1487b1cc444e" />

```java
DemoController.java

@Controller
public class DemoController {
    @GetMapping("/")
    public String home() {
        return "home";
    }
    @GetMapping("/info")
    public String info() {
        return "info/contact";
    }
}
```

<img width="619" height="167" alt="{1BCAE5D7-00BF-40BA-B989-89EB423858A5}" src="https://github.com/user-attachments/assets/14354109-6b43-4a5f-b1b1-780e6d3a7162" />

