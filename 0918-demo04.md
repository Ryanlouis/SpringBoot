# 0918 Practice - Demo03

### 

```java
ExplainDIRunner3.java (NEW)

package com.example.demo3.runner;

import com.example.demo3.calculator.AddCalculator;
import com.example.demo3.calculator.Calculator;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.core.annotation.Order;
import org.springframework.stereotype.Component;

@Component
@Slf4j
@Order(3)
public class ExplainDIRunner3 implements CommandLineRunner {
    @Autowired
    private Calculator cal1;


    @Override
    public void run(String... args) throws Exception {
        log.info("will append at last");
        log.info("calculate 5,6 with cal1={}", cal1.calc(5, 6));
    }
}
```

```java
Foo1.java (NEW)

package com.example.demo3.explain;

import com.example.demo3.calculator.Calculator;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@Getter
@NoArgsConstructor
@AllArgsConstructor
public class Foo1 {
    private int x;
    private Calculator c; // y is important, maybe can be initialized from foo1 constructor
    private int z;

    public Foo1(Calculator c) {
        this.c = c;
    }
}
```

```java
Foo2.java (NEW)

package com.example.demo3.explain;

import com.example.demo3.calculator.Calculator;
import lombok.Getter;
@Getter
public class Foo2 {
    private int x;
    private final Calculator c; // y is important, maybe can be initialized from foo1 constructor
    private int z;


    public Foo2(Calculator c) {
        this.c = c;
    }
}
```

```java
Foo3.java (NEW)

package com.example.demo3.explain;

import com.example.demo3.calculator.Calculator;
import lombok.RequiredArgsConstructor;
import lombok.Getter;
@RequiredArgsConstructor
@Getter
public class Foo3 {
    private int x;
    private final Calculator c; // y is important, maybe can be initialized from foo1 constructor
    private int z;
}
```

```java
ArgumentsTest.java (NEW src/test/java)

package com.example.demo3;

import com.example.demo3.calculator.AddCalculator;
import com.example.demo3.calculator.SubCalculator;
import com.example.demo3.explain.Foo1;
import com.example.demo3.explain.Foo2;
import com.example.demo3.explain.Foo3;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

public class ArgumentsTest {
    @Test
    public void initializeFoo1() {
        Foo1 foo1 = new Foo1();
        Assertions.assertNull(foo1.getC());

    }

    @Test
    public void initializeFoo2() {
        Foo2 foo2 = new Foo2(new SubCalculator());
        Assertions.assertEquals(2, foo2.getC().calc(4, 2));
    }

    @Test
    public void initializeFoo3() {
        Foo3 foo3 = new Foo3(new AddCalculator());
        Assertions.assertEquals(6, foo3.getC().calc(4, 2));
    }
}
```
<img width="634" height="202" alt="{F07AB8FE-3A9E-40AB-8289-9655619D2E23}" src="https://github.com/user-attachments/assets/986e41ed-8a1d-49ae-9f34-d7f046fd4b46" />

### 

```java
Racing.java (NEW)

package com.example.demo3.race;

public interface Racing {
    public String status();
}
```

```java
Bicycle.java (NEW)

package com.example.demo3.race;

import org.springframework.stereotype.Component;

@Component
public class Bicycle implements Racing {
    @Override
    public String status() {
        return "2km/min";
    }
}
```

```java
ExplainDIRunner4.java (NEW)

package com.example.demo3.runner;

import com.example.demo3.race.Bicycle;
import com.example.demo3.race.Racing;
import lombok.extern.slf4j.Slf4j;
import org.springframework.boot.CommandLineRunner;
import org.springframework.context.ApplicationContext;
import org.springframework.core.annotation.Order;
import org.springframework.stereotype.Component;

@Component
@Slf4j
@Order(4)
public class ExplainDIRunner4 implements CommandLineRunner {
    public ExplainDIRunner4(ApplicationContext context) {
        this.context = context;
    }

    private ApplicationContext context;

    @Override
    public void run(String... args) throws Exception {
        Racing r1 = context.getBean(Racing.class);
        log.info("r1={}", r1.status());
        Bicycle b1 = context.getBean(Bicycle.class);
        log.info("b1={}", b1.status());
    }
}

```

```java
ExplainDIRunner5.java (NEW)

package com.example.demo3.runner;

import com.example.demo3.race.Bicycle;
import com.example.demo3.race.Racing;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.core.annotation.Order;
import org.springframework.stereotype.Component;

@Component
@Slf4j
@Order(5)
public class ExplainDIRunner5 implements CommandLineRunner {
    @Autowired
    private Racing r1;
    @Autowired
    private Bicycle b1;

    @Override
    public void run(String... args) throws Exception {
        log.info("r1={}", r1.status());
        log.info("b1={}", b1.status());
    }
}
```
