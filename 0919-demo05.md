# 0919 Practice - Demo05

### 初始新專案H2設定


```properties
application.properties

spring.application.name=demo5
spring.datasource.url=jdbc:h2:mem:demo5
spring.datasource.username=sa
spring.datasource.password=sa
```

### 使用JPA創建TABLE

新增customer entity
@Entity 這一個註解，用於標記Java 類別是為JPA（Java Persistence API）實體類別

```java
Customer.java

spring.application.name=demo5
spring.datasource.url=jdbc:h2:mem:demo5
spring.datasource.username=sa
spring.datasource.password=sa
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
package com.example.demo5.entity;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.Id;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Entity
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Customer {
    @Id
    @GeneratedValue
    private Long id;
    @Column(nullable = false)
    private String firstName;
    @Column(nullable = false)
    private String lastName;
}

```


新增 CustomerRepository 與 Customer 建立連接
```java
CustomerRepository.java

package com.example.demo5.repository;

import com.example.demo5.entity.Customer;
import org.springframework.data.jpa.repository.JpaRepository;

public interface CustomerRepository extends JpaRepository<Customer,Long> {
}

```

### 使用CustomerRunner 藉由CustomerRepository來新增資料
```java
CustomerRunner.java

package com.example.demo5.runner;

import com.example.demo5.entity.Customer;
import com.example.demo5.repository.CustomerRepository;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.core.annotation.Order;
import org.springframework.stereotype.Component;

@Component
@Slf4j
@Order(1)
public class CustomerRunner implements CommandLineRunner {
    @Autowired
    private CustomerRepository repository;

    @Override
    public void run(String... args) throws Exception {
        log.info("repository={}", repository);
        Customer c1 = new Customer();
        c1.setFirstName("Mark");
        c1.setLastName("Ho");
        repository.save(c1);
    }
}

```
<img width="532" height="289" alt="{DD90AA97-F36D-430F-AE30-9CA4687720CE}" src="https://github.com/user-attachments/assets/95643ac1-6cbd-499c-908b-3bd40d1ea0c5" />

### log改成log4j模式


```properties
application.properties

spring.application.name=demo5
spring.datasource.url=jdbc:h2:mem:demo5
spring.datasource.username=sa
spring.datasource.password=sa
#
#spring.jpa.show-sql=true
#spring.jpa.properties.hibernate.format_sql=true
#
logging.level.org.hibernate.type.EnumType=TRACE
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.orm.jdbc.bind=TRACE
```
<img width="1489" height="130" alt="{B227AF34-E3C3-48BC-86CD-55B28E9BC672}" src="https://github.com/user-attachments/assets/61f92288-f676-4b8c-a071-cd2b49235b4f" />



